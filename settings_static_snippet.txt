# --- Drop-in STATICFILES fix (safe if 'static/' exists) ---
from pathlib import Path
import os

BASE_DIR = Path(__file__).resolve().parent.parent

STATIC_URL = "static/"
STATIC_ROOT = BASE_DIR / "static_root"

# Only include 'static/' when present to avoid W004 warnings
_static_dir = BASE_DIR / "static"
if _static_dir.exists():
    STATICFILES_DIRS = [ _static_dir ]

# WhiteNoise (add middleware near top, after SecurityMiddleware)
# MIDDLEWARE = [
#     "django.middleware.security.SecurityMiddleware",
#     "whitenoise.middleware.WhiteNoiseMiddleware",
#     ...
# ]
# Enable gzip/brotli
STATICFILES_STORAGE = "whitenoise.storage.CompressedManifestStaticFilesStorage"